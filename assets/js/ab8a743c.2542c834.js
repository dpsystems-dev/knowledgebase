"use strict";(globalThis.webpackChunkabm_web_portal_docs=globalThis.webpackChunkabm_web_portal_docs||[]).push([[9036],{493(e,n,t){t.d(n,{A:()=>s});const s=t.p+"assets/images/05-destination-type-4c067e879b6bd0b50b2abdbabd78543a.png"},743(e,n,t){t.d(n,{A:()=>s});const s=t.p+"assets/images/08-copy-secret-c9f368d6edde27566ea914050eb2c027.png"},2921(e,n,t){t.d(n,{A:()=>s});const s=t.p+"assets/images/03-webhooks-tab-ea2311816e99e566f958b679f8bf906e.png"},4219(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>h,default:()=>a,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"stripe-integration/setup/creating-webhooks","title":"How to Create a Stripe Webhook","description":"Step-by-step guide to create a webhook endpoint in Stripe so your portal receives payment notifications.","source":"@site/versioned_docs/version-1.2/stripe-integration/setup/creating-webhooks.md","sourceDirName":"stripe-integration/setup","slug":"/stripe-integration/setup/creating-webhooks","permalink":"/knowledgebase/stripe-integration/setup/creating-webhooks","draft":false,"unlisted":false,"tags":[],"version":"1.2","sidebarPosition":2,"frontMatter":{"title":"How to Create a Stripe Webhook","sidebar_position":2,"description":"Step-by-step guide to create a webhook endpoint in Stripe so your portal receives payment notifications.","keywords":["stripe","webhook","endpoint","events","notifications"]},"sidebar":"docsSidebar","previous":{"title":"How to Get Your Stripe API Keys","permalink":"/knowledgebase/stripe-integration/setup/getting-stripe-api-keys"},"next":{"title":"How to Configure Stripe in the Portal","permalink":"/knowledgebase/stripe-integration/setup/portal-configuration"}}');var o=t(4848),i=t(8453);const r={title:"How to Create a Stripe Webhook",sidebar_position:2,description:"Step-by-step guide to create a webhook endpoint in Stripe so your portal receives payment notifications.",keywords:["stripe","webhook","endpoint","events","notifications"]},h="How to Create a Stripe Webhook",d={},l=[{value:"How to Access the Webhooks Section",id:"how-to-access-the-webhooks-section",level:2},{value:"Step 1: Open Developers Menu",id:"step-1-open-developers-menu",level:3},{value:"How to Add a New Webhook Destination",id:"how-to-add-a-new-webhook-destination",level:2},{value:"Step 2: Add a New Destination",id:"step-2-add-a-new-destination",level:3},{value:"How to Select Webhook Events",id:"how-to-select-webhook-events",level:2},{value:"Step 3: Select Events to Listen For",id:"step-3-select-events-to-listen-for",level:3},{value:"How to Choose the Destination Type",id:"how-to-choose-the-destination-type",level:2},{value:"Step 4: Choose Destination Type",id:"step-4-choose-destination-type",level:3},{value:"How to Enter Your Endpoint URL",id:"how-to-enter-your-endpoint-url",level:2},{value:"Step 5: Enter Your Endpoint URL",id:"step-5-enter-your-endpoint-url",level:3},{value:"How to Get the Webhook Secret",id:"how-to-get-the-webhook-secret",level:2},{value:"Step 6: Get the Webhook Secret",id:"step-6-get-the-webhook-secret",level:3},{value:"Required Webhook Events Summary",id:"required-webhook-events-summary",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"how-to-create-a-stripe-webhook",children:"How to Create a Stripe Webhook"})}),"\n",(0,o.jsx)(n.p,{children:"Webhooks allow Stripe to notify your portal when payment events occur (e.g., payment completed, payment failed). This guide walks you through creating a webhook endpoint."}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"how-to-access-the-webhooks-section",children:"How to Access the Webhooks Section"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"What you'll do:"})," Navigate to the webhook configuration in Stripe."]}),"\n",(0,o.jsx)(n.h3,{id:"step-1-open-developers-menu",children:"Step 1: Open Developers Menu"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["In the Stripe Dashboard, ",(0,o.jsx)(n.strong,{children:"click"})," ",(0,o.jsx)(n.strong,{children:'"Developers"'})," in the bottom-left corner of the screen"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["A menu will expand. ",(0,o.jsx)(n.strong,{children:"Click"})," ",(0,o.jsx)(n.strong,{children:'"Webhooks"'})," from the list"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.img,{alt:"Developers menu with Webhooks option",src:t(6898).A+"",width:"958",height:"717"}),"\n",(0,o.jsx)(n.em,{children:"Developers menu expanded showing Webhooks option"})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"how-to-add-a-new-webhook-destination",children:"How to Add a New Webhook Destination"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"What you'll do:"})," Start creating a new webhook endpoint."]}),"\n",(0,o.jsx)(n.h3,{id:"step-2-add-a-new-destination",children:"Step 2: Add a New Destination"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["On the ",(0,o.jsx)(n.strong,{children:"Event destinations"})," page, ",(0,o.jsx)(n.strong,{children:"click"})," the green ",(0,o.jsx)(n.strong,{children:'"+ Add destination"'})," button in the top-right area"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.img,{alt:"Webhooks tab with Add destination button",src:t(2921).A+"",width:"958",height:"723"}),"\n",(0,o.jsx)(n.em,{children:"Webhooks page showing the Add destination button"})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"how-to-select-webhook-events",children:"How to Select Webhook Events"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"What you'll do:"})," Choose which payment events should trigger notifications."]}),"\n",(0,o.jsx)(n.h3,{id:"step-3-select-events-to-listen-for",children:"Step 3: Select Events to Listen For"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Under ",(0,o.jsx)(n.strong,{children:'"Events from"'}),", ",(0,o.jsx)(n.strong,{children:"select"})," ",(0,o.jsx)(n.strong,{children:'"Your account"'})," (the first option with the diagram icon)"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["In the ",(0,o.jsx)(n.strong,{children:"Events"})," section, you'll see a search box. ",(0,o.jsx)(n.strong,{children:"Type"})," ",(0,o.jsx)(n.code,{children:"checkout"})," in the search box"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Check"})," the following 2 required events:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"checkout.session.completed"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"checkout.session.expired"})}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Optional:"})," You can also add ",(0,o.jsx)(n.code,{children:"payment_intent.payment_failed"})," for explicit failure notifications, though card declines are typically handled through the checkout session flow."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Click"})," the ",(0,o.jsx)(n.strong,{children:'"Continue"'})," button"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.img,{alt:"Event selection screen",src:t(9777).A+"",width:"699",height:"891"}),"\n",(0,o.jsx)(n.em,{children:"Event selection showing checkout events checked"})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"how-to-choose-the-destination-type",children:"How to Choose the Destination Type"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"What you'll do:"})," Select webhook endpoint as the destination."]}),"\n",(0,o.jsx)(n.h3,{id:"step-4-choose-destination-type",children:"Step 4: Choose Destination Type"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Select"})," ",(0,o.jsx)(n.strong,{children:'"Webhook endpoint"'}),' (the first option - "Send webhook events to a hosted endpoint")']}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Click"})," ",(0,o.jsx)(n.strong,{children:'"Continue"'})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.img,{alt:"Destination type selection",src:t(493).A+"",width:"705",height:"660"}),"\n",(0,o.jsx)(n.em,{children:"Destination type options with Webhook endpoint selected"})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"how-to-enter-your-endpoint-url",children:"How to Enter Your Endpoint URL"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"What you'll do:"})," Enter the URL where Stripe should send webhook events."]}),"\n",(0,o.jsx)(n.h3,{id:"step-5-enter-your-endpoint-url",children:"Step 5: Enter Your Endpoint URL"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["In the ",(0,o.jsx)(n.strong,{children:'"Endpoint URL"'})," field, ",(0,o.jsx)(n.strong,{children:"enter"})," your portal's webhook URL"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Format:"})," ",(0,o.jsx)(n.code,{children:"{your-baseUrl}/api/payments/webhook"})]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Example:"})," If your portal is at ",(0,o.jsx)(n.code,{children:"https://web-dp.tenjo.ovh"}),", enter:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"https://web-dp.tenjo.ovh/api/payments/webhook\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.strong,{children:'"Destination name"'})," field is auto-generated - you can leave it as-is or change it"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.strong,{children:'"Description"'})," field is optional"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Click"})," ",(0,o.jsx)(n.strong,{children:'"Create destination"'})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.img,{alt:"Endpoint URL configuration",src:t(7766).A+"",width:"855",height:"800"}),"\n",(0,o.jsx)(n.em,{children:"Endpoint URL field with example URL entered"})]}),"\n",(0,o.jsxs)(n.admonition,{type:"important",children:[(0,o.jsx)(n.p,{children:"The URL must:"}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Start with ",(0,o.jsx)(n.code,{children:"https://"})]}),"\n",(0,o.jsxs)(n.li,{children:["Be accessible from the internet (not ",(0,o.jsx)(n.code,{children:"localhost"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:["End with ",(0,o.jsx)(n.code,{children:"/api/payments/webhook"})]}),"\n"]})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"how-to-get-the-webhook-secret",children:"How to Get the Webhook Secret"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"What you'll do:"})," Copy the webhook signing secret for portal configuration."]}),"\n",(0,o.jsx)(n.h3,{id:"step-6-get-the-webhook-secret",children:"Step 6: Get the Webhook Secret"}),"\n",(0,o.jsx)(n.p,{children:"After creating the webhook, you'll be taken to the destination details page."}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Find"})," the ",(0,o.jsx)(n.strong,{children:'"Signing secret"'})," section on the right side of the page"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Click"})," the ",(0,o.jsx)(n.strong,{children:"eye icon"})," to reveal the secret"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.img,{alt:"Reveal signing secret",src:t(7384).A+"",width:"850",height:"797"}),"\n",(0,o.jsx)(n.em,{children:"Signing secret section with eye icon to reveal"})]}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Click"})," the ",(0,o.jsx)(n.strong,{children:"clipboard icon"})," to copy the secret to your clipboard"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.img,{alt:"Copy signing secret",src:t(743).A+"",width:"847",height:"787"}),"\n",(0,o.jsx)(n.em,{children:"Signing secret revealed with copy button"})]}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsxs)(n.li,{children:["The secret should start with ",(0,o.jsx)(n.code,{children:"whsec_"}),". ",(0,o.jsx)(n.strong,{children:"Save this value"})," - you'll need it for the portal configuration"]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsx)(n.p,{children:"The webhook secret is used to verify that incoming webhook requests actually came from Stripe and weren't forged by a malicious third party."})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"required-webhook-events-summary",children:"Required Webhook Events Summary"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Event"}),(0,o.jsx)(n.th,{children:"Purpose"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"checkout.session.completed"})}),(0,o.jsx)(n.td,{children:"Notifies when a payment succeeds"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"checkout.session.expired"})}),(0,o.jsx)(n.td,{children:"Notifies when a checkout session times out"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"payment_intent.payment_failed"})}),(0,o.jsx)(n.td,{children:"(Optional) Explicit card decline notifications"})]})]})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,o.jsx)(n.p,{children:"After copying your webhook secret:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"./portal-configuration",children:"Configure the Portal"})," - Enter the webhook secret in Admin Dashboard"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"./getting-stripe-api-keys",children:"Getting Stripe API Keys"})," - Previous step"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"./portal-configuration",children:"Portal Configuration"})," - Next step"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"../production-checklist",children:"Production Checklist"})," - Going live checklist"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},6898(e,n,t){t.d(n,{A:()=>s});const s=t.p+"assets/images/02-developers-menu-a00a92ebda62280ed915933be312b9ac.png"},7384(e,n,t){t.d(n,{A:()=>s});const s=t.p+"assets/images/07-reveal-secret-9dbee09cbe0dc04ede2754490a256a5f.png"},7766(e,n,t){t.d(n,{A:()=>s});const s=t.p+"assets/images/06-endpoint-url-981fdf13f06adf1c82d97565bd11ecaf.png"},8453(e,n,t){t.d(n,{R:()=>r,x:()=>h});var s=t(6540);const o={},i=s.createContext(o);function r(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function h(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:n},e.children)}},9777(e,n,t){t.d(n,{A:()=>s});const s=t.p+"assets/images/04-select-events-aa827a54987980d9b68d6a42801b5f90.png"}}]);