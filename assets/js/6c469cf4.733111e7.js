"use strict";(globalThis.webpackChunkabm_web_portal_docs=globalThis.webpackChunkabm_web_portal_docs||[]).push([[4934],{3114(e,t,n){n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"stripe-integration/troubleshooting/payment-stuck-pending","title":"Why Is My Payment Stuck on Pending?","description":"Step-by-step troubleshooting guide for payments that show PENDING but the customer says they paid.","source":"@site/versioned_docs/version-1.2/stripe-integration/troubleshooting/payment-stuck-pending.md","sourceDirName":"stripe-integration/troubleshooting","slug":"/stripe-integration/troubleshooting/payment-stuck-pending","permalink":"/knowledgebase/stripe-integration/troubleshooting/payment-stuck-pending","draft":false,"unlisted":false,"tags":[],"version":"1.2","sidebarPosition":2,"frontMatter":{"title":"Why Is My Payment Stuck on Pending?","sidebar_position":2,"description":"Step-by-step troubleshooting guide for payments that show PENDING but the customer says they paid.","keywords":["pending","stuck","troubleshooting","webhook","paid","payment"]},"sidebar":"docsSidebar","previous":{"title":"What Happens When a Payment Goes Wrong?","permalink":"/knowledgebase/stripe-integration/troubleshooting/common-issues"},"next":{"title":"Quick Reference for Support","permalink":"/knowledgebase/stripe-integration/troubleshooting/quick-reference"}}');var i=n(4848),o=n(8453);const r={title:"Why Is My Payment Stuck on Pending?",sidebar_position:2,description:"Step-by-step troubleshooting guide for payments that show PENDING but the customer says they paid.",keywords:["pending","stuck","troubleshooting","webhook","paid","payment"]},c="Why Is My Payment Stuck on Pending?",a={},d=[{value:"Step 1: Verify in Stripe Dashboard",id:"step-1-verify-in-stripe-dashboard",level:2},{value:"Step 2: Check If Payment Actually Succeeded",id:"step-2-check-if-payment-actually-succeeded",level:2},{value:"Step 3: Check LatestStatusUpdateSource",id:"step-3-check-lateststatusupdatesource",level:2},{value:"Step 4: Check Webhook Delivery in Stripe",id:"step-4-check-webhook-delivery-in-stripe",level:2},{value:"Common Causes and Solutions",id:"common-causes-and-solutions",level:2},{value:"Cause: Webhook Endpoint Not Reachable",id:"cause-webhook-endpoint-not-reachable",level:3},{value:"Cause: Webhook Secret Mismatch",id:"cause-webhook-secret-mismatch",level:3},{value:"Cause: Customer Still on Checkout Page",id:"cause-customer-still-on-checkout-page",level:3},{value:"Cause: Network Latency",id:"cause-network-latency",level:3},{value:"What If None of This Helps?",id:"what-if-none-of-this-helps",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"why-is-my-payment-stuck-on-pending",children:"Why Is My Payment Stuck on Pending?"})}),"\n",(0,i.jsx)(t.p,{children:"This is the most common support issue. A customer says they paid, but the portal shows the payment as PENDING. Follow these steps to diagnose and resolve."}),"\n",(0,i.jsx)(t.h2,{id:"step-1-verify-in-stripe-dashboard",children:"Step 1: Verify in Stripe Dashboard"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["Go to ",(0,i.jsx)(t.a,{href:"https://dashboard.stripe.com",children:"dashboard.stripe.com"})]}),"\n",(0,i.jsx)(t.li,{children:"Search for the customer or session ID"}),"\n",(0,i.jsx)(t.li,{children:'Check if payment shows as "Succeeded" in Stripe'}),"\n"]}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsxs)(t.p,{children:["You can search by StripeSessionId (starts with ",(0,i.jsx)(t.code,{children:"cs_"}),") or by customer email/name."]})}),"\n",(0,i.jsx)(t.h2,{id:"step-2-check-if-payment-actually-succeeded",children:"Step 2: Check If Payment Actually Succeeded"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:'If Stripe shows "Succeeded" but our system shows PENDING:'})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"The webhook may have failed"}),"\n",(0,i.jsx)(t.li,{children:"Wait up to 5 minutes for the cron job to catch it"}),"\n",(0,i.jsx)(t.li,{children:"Or manually trigger a status check by refreshing the payment page"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"step-3-check-lateststatusupdatesource",children:"Step 3: Check LatestStatusUpdateSource"}),"\n",(0,i.jsxs)(t.p,{children:["Look at the ",(0,i.jsx)(t.code,{children:"LatestStatusUpdateSource"})," column in the database:"]}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Meaning"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"NULL"}),(0,i.jsx)(t.td,{children:"Webhook hasn't processed yet"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"webhook"})}),(0,i.jsx)(t.td,{children:"Webhook received but status still pending (possible bug)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"polling"})}),(0,i.jsx)(t.td,{children:"Frontend polling detected it"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"cron"})}),(0,i.jsx)(t.td,{children:"Background job caught it"})]})]})]}),"\n",(0,i.jsxs)(t.p,{children:["If ",(0,i.jsx)(t.code,{children:"LatestStatusUpdateSource"})," is NULL and payment succeeded in Stripe, the webhook didn't arrive or failed to process."]}),"\n",(0,i.jsx)(t.h2,{id:"step-4-check-webhook-delivery-in-stripe",children:"Step 4: Check Webhook Delivery in Stripe"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["In Stripe Dashboard, go to ",(0,i.jsx)(t.strong,{children:"Developers > Webhooks"})]}),"\n",(0,i.jsx)(t.li,{children:"Click on your webhook endpoint"}),"\n",(0,i.jsxs)(t.li,{children:["Check the ",(0,i.jsx)(t.strong,{children:"Event deliveries"})," tab"]}),"\n",(0,i.jsxs)(t.li,{children:["Look for ",(0,i.jsx)(t.code,{children:"checkout.session.completed"})," events"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Signs of webhook issues:"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Red status codes (4xx, 5xx)"}),"\n",(0,i.jsx)(t.li,{children:'"Failed" delivery status'}),"\n",(0,i.jsx)(t.li,{children:"Missing events for the timeframe"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"common-causes-and-solutions",children:"Common Causes and Solutions"}),"\n",(0,i.jsx)(t.h3,{id:"cause-webhook-endpoint-not-reachable",children:"Cause: Webhook Endpoint Not Reachable"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Symptoms:"})," All recent webhook deliveries show errors."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Solution:"})," Check server is accessible from the internet and ",(0,i.jsx)(t.code,{children:"/api/payments/webhook"})," endpoint is responding."]}),"\n",(0,i.jsx)(t.h3,{id:"cause-webhook-secret-mismatch",children:"Cause: Webhook Secret Mismatch"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Symptoms:"})," Webhooks fail with signature verification error."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Solution:"})," Update the Webhook Secret in Admin Dashboard > App Configuration > STRIPE."]}),"\n",(0,i.jsx)(t.h3,{id:"cause-customer-still-on-checkout-page",children:"Cause: Customer Still on Checkout Page"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Symptoms:"})," Payment shows PENDING, customer hasn't completed checkout yet."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Solution:"})," Customer needs to enter card details and click Pay. Payment is not complete until Stripe confirms it."]}),"\n",(0,i.jsx)(t.h3,{id:"cause-network-latency",children:"Cause: Network Latency"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Symptoms:"})," Payment succeeded moments ago, webhook not yet processed."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Solution:"})," Wait 1-2 minutes. If still pending after 5 minutes, cron will detect it."]}),"\n",(0,i.jsx)(t.h2,{id:"what-if-none-of-this-helps",children:"What If None of This Helps?"}),"\n",(0,i.jsx)(t.p,{children:"If the payment genuinely succeeded in Stripe but remains stuck in PENDING:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Check server logs for errors"}),"\n",(0,i.jsx)(t.li,{children:"Look for any error messages in the Stripe webhook events"}),"\n",(0,i.jsx)(t.li,{children:"The background cron job (every 5 minutes) should eventually catch it"}),"\n",(0,i.jsx)(t.li,{children:"As a last resort, a developer can manually update the status"}),"\n"]}),"\n",(0,i.jsx)(t.admonition,{type:"warning",children:(0,i.jsxs)(t.p,{children:["Never manually mark a payment as ",(0,i.jsx)(t.code,{children:"completed"})," unless you have verified it succeeded in Stripe. Always check the Stripe Dashboard first."]})}),"\n",(0,i.jsx)(t.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"./common-issues",children:"What Happens When a Payment Goes Wrong?"})," - Other edge cases"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"../technical-reference/payment-workflow",children:"How Does the Payment Workflow Work?"})," - Understanding the update mechanisms"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"./quick-reference",children:"Quick Reference"})," - Status tables and timeframes"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453(e,t,n){n.d(t,{R:()=>r,x:()=>c});var s=n(6540);const i={},o=s.createContext(i);function r(e){const t=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);